<script lang="ts" setup>
import { ref, computed, defineProps } from "vue";

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –ø—É—Ç–µ–π –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º
const getImageUrl = (name: string) => {
    // –¢–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ñ–æ—Ä–º–∏—Ä—É–µ–º –ø—É—Ç—å: /images/ + –∏–º—è_—Ñ–∞–π–ª–∞
    return new URL(`/public/images/examples/${name}`, import.meta.url).href;
};

// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—Ä–æ–ø—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ —ç—Ç–æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å
interface Props {
    activeFilters: string[]; // –ú–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫ —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
}
const props = defineProps<Props>();

// –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ñ—É—Ç–±–æ–ª–æ–∫ (–≤–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ –ø–æ–¥ —Å–≤–æ—é —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö)
interface ExampleProduct {
    id: number;
    name: string;
    image: string;
    category: string[];
}

const allProductsExamples = ref<ExampleProduct[]>([
    {
        id: 1,
        name: "üëï –°–µ–∫—Å—É–∞–ª—å–Ω–∞—è —Ñ—É—Ç–±–æ–ª–∫–∞",
        image: "t-shirts.jpg",
        category: ["clothing", "for-men"],
    },
    {
        id: 2,
        name: "üëï –ê–Ω–∏–º–µ –¥–ª—è –º—É–∂—á–∏–Ω",
        image: "undershirt-1.jpg",
        category: ["clothing", "anime", "for-men"],
    },
    {
        id: 3,
        name: "üî• –õ—é–±–∏—Ç–µ–ª—è–º –∫–æ—Ç–∏–∫–æ–≤",
        image: "undershirt-2.jpg",
        category: ["clothing", "for-women", "animals"],
    },
    {
        id: 4,
        name: "‚ú® –õ–∏—Å—Ç–æ–≤–∞—è 3D –ª–∞–∫ —Ñ–æ–ª—å–≥–∞",
        image: "listovaya-3d-lak-folga.png",
        category: ["sheet-printing"],
    },
    {
        id: 5,
        name: "üìá –ü–µ—á–∞—Ç—å –≤–∏–∑–∏—Ç–æ–∫",
        image: "vizitki.png",
        category: ["business-cards"],
    },
    {
        id: 6,
        name: "üñ®Ô∏è –ü–µ—á–∞—Ç—å –ª–∏—Å—Ç–æ–≤–æ–∫",
        image: "listovka.png",
        category: ["flyers", "sheet-printing"],
    },
    {
        id: 7,
        name: "üìú –ü–µ—á–∞—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π",
        image: "priglasheniya.png",
        category: ["invitations", "sheet-printing"],
    },
    {
        id: 8,
        name: "üìú –ü–µ—á–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç–æ–∫",
        image: "otkrytki.png",
        category: ["cards", "sheet-printing"],
    },
    {
        id: 9,
        name: "üìñ –ü–µ—á–∞—Ç—å –∫–Ω–∏–∂–Ω—ã—Ö –∑–∞–∫–ª–∞–¥–æ–∫",
        image: "knizhnye-zakladki.png",
        category: ["bookmarks", "sheet-printing"],
    },
    {
        id: 10,
        name: "üè∑Ô∏è –ü–µ—á–∞—Ç—å –Ω–∞–∫–ª–µ–µ–∫",
        image: "nakleyki.png",
        category: ["stickers"],
    },
    {
        id: 11,
        name: "‚úâÔ∏è –ü–µ—á–∞—Ç—å –Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ö",
        image: "konvert.png",
        category: ["envelopes", "sheet-printing"],
    },
    {
        id: 12,
        name: "üìö –ë—É–∫–ª–µ—Ç—ã –∏ –ª–∏—Ñ–ª–µ—Ç—ã",
        image: "bukleti.png",
        category: ["brochures", "multi-page-printing"],
    },
    {
        id: 13,
        name: "üîñ –ü–µ—á–∞—Ç—å –±–∏—Ä–æ–∫",
        image: "birka-oblozhka.png",
        category: ["packaging", "sheet-printing"],
    },
    {
        id: 14,
        name: "üÉè –ü–µ—á–∞—Ç—å –∫–æ–ª–æ–¥—ã –∫–∞—Ä—Ç",
        image: "kolody_kart.png",
        category: ["multi-page-printing"],
    },
    {
        id: 15,
        name: "üìÑ –ü–µ—á–∞—Ç—å —Ñ–ª–∞–µ—Ä–æ–≤",
        image: "flayer.png",
        category: ["flyers", "sheet-printing"],
    },
    {
        id: 16,
        name: "üñºÔ∏è –ü–µ—á–∞—Ç—å –∞—Ñ–∏—à",
        image: "afisha.png",
        category: ["posters", "wide-format-printing", "interior-printing"],
    },
    {
        id: 17,
        name: "üèÖ –ü–µ—á–∞—Ç—å –¥–∏–ø–ª–æ–º–æ–≤",
        image: "diplom.png",
        category: ["diplomas", "sheet-printing"],
    },
    {
        id: 18,
        name: "üèÜ –ü–µ—á–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤",
        image: "pechat-sertifikatov.png",
        category: ["certificates", "sheet-printing"],
    },
    {
        id: 19,
        name: "üéüÔ∏è –ü–µ—á–∞—Ç—å –±–∏–ª–µ—Ç–æ–≤",
        image: "pechat-biletov.png",
        category: ["tickets", "sheet-printing"],
    },
    {
        id: 20,
        name: "üñ®Ô∏è –ü–µ—á–∞—Ç—å –ø–ª–∞–∫–∞—Ç–æ–≤",
        image: "pechat-plakatov.png",
        category: ["posters", "wide-format-printing", "interior-printing"],
    },
    {
        id: 21,
        name: "üìÑ –§–∏—Ä–º–µ–Ω–Ω—ã–µ –±–ª–∞–Ω–∫–∏",
        image: "blank.png",
        category: ["sheet-printing"],
    },
    {
        id: 22,
        name: "üìÅ –ë—É–º–∞–∂–Ω—ã–µ –ø–∞–ø–∫–∏",
        image: "bumazhnye-papki-2.png",
        category: ["sheet-printing"],
    },
    {
        id: 23,
        name: "üìÅ –ü–∞–ø–∫–∏ –Ω–∞ –∫–æ–ª—å—Ü–∞—Ö",
        image: "papki-na-kolcah-2.png",
        category: ["sheet-printing"],
    },
    {
        id: 24,
        name: "üìõ –ü–µ—á–∞—Ç—å –±–µ–π–¥–∂–µ–π",
        image: "bejdzhi-new-2.png",
        category: ["corporate-merch", "sheet-printing"],
    },
    {
        id: 25,
        name: "üí≥ –ü–ª–∞—Å—Ç–∏–∫–æ–≤—ã–µ –∫–∞—Ä—Ç—ã",
        image: "main-small.png",
        category: ["corporate-merch", "business-cards"],
    },
]);

// –í—ã—á–∏—Å–ª—è–µ–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ—É—Ç–±–æ–ª–æ–∫
const filteredExamples = computed(() => {
    if (props.activeFilters.length === 0) {
        // –ï—Å–ª–∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ —Ñ—É—Ç–±–æ–ª–∫–∏
        return allProductsExamples.value;
    } else {
        // –§–∏–ª—å—Ç—Ä—É–µ–º —Ñ—É—Ç–±–æ–ª–∫–∏: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ, —á—å–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
        return allProductsExamples.value.filter((tshirt) =>
            props.activeFilters.some((filter) =>
                tshirt.category.includes(filter),
            ),
        );
    }
});
</script>
<template>
    <div class="w-full">
        <div
            class="mx-auto flex max-w-[1590px] flex-wrap justify-center gap-x-5.5 gap-y-5.5 px-2.5 pb-22.5 xl:justify-around"
        >
            <div
                v-for="example in filteredExamples"
                :key="example.id"
                class="relative h-89 w-89 overflow-hidden rounded-xl"
                :style="{
                    backgroundImage: `url(${getImageUrl(example.image)})`,
                    backgroundSize: 'cover',
                    backgroundPosition: 'center',
                }"
            >
                <div
                    class="absolute top-0 right-0 bottom-0 left-0 flex items-end bg-black/25"
                >
                    <p class="mb-4 ml-5 text-lg font-semibold text-white">
                        {{ example.name }}
                    </p>
                </div>
            </div>
            <!-- –ü—É—Å—Ç—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä—è–¥–∞ –ø–æ –ª–µ–≤–æ–º—É –∫—Ä–∞—é –Ω–∞ –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö -->
            <div
                v-for="n in 3"
                :key="`dummy-${n}`"
                class="hidden w-89 xl:block"
            ></div>
        </div>
    </div>
</template>
<style scoped>
h2 {
    font-family: "Commissioner";
}
</style>
