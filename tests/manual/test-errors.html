<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã –æ—à–∏–±–æ–∫</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }

        button {
            margin: 10px;
            padding: 10px 20px;
            background: #1882F0;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background: #0066cc;
        }

        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .result {
            margin: 10px 0;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 3px;
        }
    </style>
</head>

<body>
    <h1>üß™ –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫</h1>

    <div class="test-section">
        <h2>1. –¢–µ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h2>
        <button onclick="testNotifications()">–ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</button>
        <div id="notification-result" class="result"></div>
    </div>

    <div class="test-section">
        <h2>2. –¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏</h2>
        <button onclick="testValidation()">–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º—ã</button>
        <div id="validation-result" class="result"></div>
    </div>

    <div class="test-section">
        <h2>3. –¢–µ—Å—Ç API –æ—à–∏–±–æ–∫</h2>
        <button onclick="testApiErrors()">–¢–µ—Å—Ç API –∑–∞–ø—Ä–æ—Å–æ–≤</button>
        <div id="api-result" class="result"></div>
    </div>

    <div class="test-section">
        <h2>4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∞–π—Ç–∞</h2>
        <button onclick="window.open('/', '_blank')">–û—Ç–∫—Ä—ã—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç</button>
        <p>–û—Ç–∫—Ä–æ–π—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫–∞–∑–∞</p>
    </div>

    <script>
        function log(elementId, message) {
            const element = document.getElementById(elementId);
            element.innerHTML += '<div>' + new Date().toLocaleTimeString() + ': ' + message + '</div>';
        }

        function testNotifications() {
            log('notification-result', 'üîÑ –¢–µ—Å—Ç–∏—Ä—É–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è...');

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            const mainWindow = window.parent !== window ? window.parent : window;

            try {
                // –ü—Ä–æ–±—É–µ–º —Å–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                const testDiv = document.createElement('div');
                testDiv.style.cssText = `
                    position: fixed; top: 20px; right: 20px; z-index: 9999;
                    background: #10B981; color: white; padding: 15px 20px;
                    border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    animation: slideIn 0.3s ease-out;
                `;
                testDiv.innerHTML = '‚úÖ –¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!';

                const style = document.createElement('style');
                style.textContent = `
                    @keyframes slideIn {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                `;
                document.head.appendChild(style);
                document.body.appendChild(testDiv);

                setTimeout(() => {
                    testDiv.remove();
                    style.remove();
                }, 3000);

                log('notification-result', '‚úÖ –¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–∫–∞–∑–∞–Ω–æ');
            } catch (error) {
                log('notification-result', '‚ùå –û—à–∏–±–∫–∞: ' + error.message);
            }
        }

        function testValidation() {
            log('validation-result', 'üîÑ –¢–µ—Å—Ç–∏—Ä—É–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏—é...');

            // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—É—é —Ñ–æ—Ä–º—É
            const testForm = document.createElement('div');
            testForm.innerHTML = `
                <div style="margin: 10px 0;">
                    <input type="text" id="test-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è" style="padding: 8px; margin: 5px; border: 1px solid #ddd; border-radius: 4px;">
                    <span id="name-error" style="color: red; font-size: 12px;"></span>
                </div>
                <div style="margin: 10px 0;">
                    <input type="tel" id="test-phone" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω" style="padding: 8px; margin: 5px; border: 1px solid #ddd; border-radius: 4px;">
                    <span id="phone-error" style="color: red; font-size: 12px;"></span>
                </div>
                <button onclick="validateTestForm()" style="margin: 5px;">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é</button>
            `;

            document.getElementById('validation-result').appendChild(testForm);
            log('validation-result', '‚úÖ –¢–µ—Å—Ç–æ–≤–∞—è —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∞');
        }

        function validateTestForm() {
            const name = document.getElementById('test-name').value;
            const phone = document.getElementById('test-phone').value;

            // –ü—Ä–æ—Å—Ç–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
            let hasErrors = false;

            if (!name || name.length < 2) {
                document.getElementById('name-error').textContent = '–ò–º—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞';
                document.getElementById('test-name').style.borderColor = 'red';
                hasErrors = true;
            } else {
                document.getElementById('name-error').textContent = '';
                document.getElementById('test-name').style.borderColor = 'green';
            }

            if (!phone || phone.length < 10) {
                document.getElementById('phone-error').textContent = '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞';
                document.getElementById('test-phone').style.borderColor = 'red';
                hasErrors = true;
            } else {
                document.getElementById('phone-error').textContent = '';
                document.getElementById('test-phone').style.borderColor = 'green';
            }

            if (!hasErrors) {
                log('validation-result', '‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ!');
            } else {
                log('validation-result', '‚ùå –ù–∞–π–¥–µ–Ω—ã –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏');
            }
        }

        function testApiErrors() {
            log('api-result', 'üîÑ –¢–µ—Å—Ç–∏—Ä—É–µ–º API –∑–∞–ø—Ä–æ—Å—ã...');

            // –¢–µ—Å—Ç —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
            const tests = [
                { url: '/api/nonexistent', expected: '404 Not Found' },
                { url: '/submit-order', method: 'POST', data: {}, expected: 'Validation Error' }
            ];

            tests.forEach((test, index) => {
                setTimeout(() => {
                    const options = {
                        method: test.method || 'GET',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Requested-With': 'XMLHttpRequest'
                        }
                    };

                    if (test.data) {
                        options.body = JSON.stringify(test.data);
                    }

                    fetch(test.url, options)
                        .then(response => {
                            log('api-result', `üì° ${test.url}: ${response.status} ${response.statusText}`);
                            return response.text();
                        })
                        .then(data => {
                            log('api-result', `üìÑ –û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω (${data.length} —Å–∏–º–≤–æ–ª–æ–≤)`);
                        })
                        .catch(error => {
                            log('api-result', `‚ùå –û—à–∏–±–∫–∞ –¥–ª—è ${test.url}: ${error.message}`);
                        });
                }, index * 1000);
            });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function () {
            log('notification-result', 'üöÄ –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            log('validation-result', 'üìù –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –≤–∞–ª–∏–¥–∞—Ü–∏–∏');
            log('api-result', 'üåê –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é API');
        });
    </script>
</body>

</html>
